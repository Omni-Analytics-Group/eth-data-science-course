<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Data Visualization and Design</title>
    <meta charset="utf-8" />
    <meta name="author" content="Omni Analytics Group" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
    <link rel="stylesheet" href="classroom.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Data Visualization and Design
## Using ggplot2 <br> <br> <br> <br>
### Omni Analytics Group

---






class: center, middle

# MOTIVATION

---

# Why visualize?

- The sole purpose of visualization is communication


- Visualization offers an alternative way of communicating numbers

![](images/Minard.png)

---

# Tables and lists vs. Charts and graphs


&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; Sepal.Length &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Sepal.Width &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Petal.Length &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Petal.Width &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Species &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 5.1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4.9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4.6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 5.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 5.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.4 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; setosa &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Tables and lists vs. Charts and graphs


![](images/table-modified.png)

---

# Tables and lists vs. Charts and graphs



&lt;img src="motivation_files/figure-html/unnamed-chunk-3-1.png" style="display: block; margin: auto;" /&gt;

Visualizations can aid communication and make the data easier to perceive


---
class: center, middle 

# Survey of types of graphs

---

# Beginner


.pull-left[
**One Variable**
- Discrete
  - Bar Chart
  - Pie Chart
  
- Continuous
  - Stem and Leaf Plots
  - Histograms
  
]

.pull-right[
**Two variables**
- Continuous X, Continuous Y
  - Scatterplots
  
- Maps
]

&lt;br/&gt;


![](motivation_files/figure-html/beg-1.png)&lt;!-- --&gt;


---

# Intermediate

- Parallel Coordinate Plots
- Mosaic Plots
- Radar Charts
- Heat Maps

&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;


![](motivation_files/figure-html/int-1.png)&lt;!-- --&gt;



---

# Advanced

- Density Plots
- Violin Plots
- Social Network Plots

&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;

![](motivation_files/figure-html/adv-1.png)&lt;!-- --&gt;

  
---
class: center, middle 

# Grammar of Graphics

---

# Grammar of Graphics



What is the grammar of graphics?

- Developed by Leland Wilkinson, is a set of grammatical rules for creating perceivable graphs

- Rather than thinking about a limited set of graphs, think about graphical forms

- Charts are instances of much more general objects
  
- An abstraction which makes thinking, reasoning, and communicating graphics easier

![](images/grammar.png)
???


We often talk about types of graphs – bar plots, pie charts, scatterplots – as though they are unrelated, but most graphs share many aspects of their structure. 

We can think of graphs as visual representations of (possibly transformed) data, along with labels (like axes and legends) that make the meaning clear.

Much like the grammar of a language allows you to combine words into meaningful sentences, a grammar of graphics provides a structure to combine graphical elements into figures that display data in a meaningful way. 

The grammar of graphics was developed in order to produce a flexible system that can create a rich variety of charts as simply as possible, without duplication of methods.

A grammar provides a strong foundation for understanding a diverse range of graphics. A grammar may also help guide us on what a well-formed or correct graphic looks like, but there will still be many grammatically correct but nonsensical graphics
---

# Grammar of Graphics

Different types of graphs may appear completely distinct, but in actuality share many common elements.

By making different visual choices, you can use graphs to highlight different aspects of the same data. 

For example, here are three ways of displaying the same data:


&lt;img src="motivation_files/figure-html/plots-3-1.png"  /&gt;


???
add in description of how they are different


Different types of graphs may, at first glance, appear completely distinct. But in fact, graphs share many common elements, such as coordinate systems and using geometric shapes to represent data. 

By making different visual choices (Cartesian or polar coordinates, points or lines or bars to represent data), you can use graphs to highlight different aspects of the same data. For example, here are three ways of displaying the same data:

---

# Grammar of Graphics

Statistical graphic specifications are expressed in six statements:

1) **DATA**: a set of data operations that create variables from datasets  

2) **TRANS**: variable transformations  

3) **SCALE**: scale transformations  

4) **COORD**: a coordinate system  

5) **ELEMENT**: graphs (points) and their aesthetic attributes (color)  

6) **GUIDE**: one or more guides (axes, legends, etc.)  



???
The internal processes that constitute the syntax of the grammar of graphics
&lt;br/&gt;
&lt;br/&gt;

![](images/grammar.png)


a data flow diagram that shoes what the stages are, how they must be ordered, and waht data are required along the way

provides us the ingredients and the dependencies among them, but it does not tell us how to assemble the ingredients

The Recipe:

1. Create variables – extract data into variables  
2. apply algebra – 
3. apply scales – ex. categorical
4. compute statistics
5. construct geometry
6. apply coordinates - ex. for polar: send (x,y) to (r, theta)
- by postponing the coordinnates operation as late in the pipeline as possible, we have made the system more flexible
7. compute aesthetics
- aesthetic functions translate a graph into a graphic, which is a set of drawing instructions for a renderer
ex. position, color, label



---

# Limitations to the Grammar

- tells us what words make up our graphical “sentences,” but offers no advice on how to write well

- is not about good taste, practice, or graphic design

- while very useful, the grammar is not all encompassing

- does not include interactive graphics

- does not include a few interesting and useful charts


---
class: center, middle 

# ggplot2
## A layered grammar of graphics

---

## A layered grammar vs The Grammar of Graphics

ggplot2 is based on The Grammar of Graphics


![](images/layered-grammar.png)

In both grammars, the components are independent, meaning that we can generally change a single component in isolation

---

# What is a graphic?

ggplot2 uses the idea that you can build every graph with graphical components from three sources

  1. the **data** , represented by **geoms** 
  
  2. the **scales** and **coordinate system**
  
  3. the **plot annotations**
  
- to display values, map variables in the data to visual properties of the geom (**aesthetics**) like **size**, **color**, and **x** and **y** locations



![](images/build1.png)![](images/build2.png)
---
# ggplot2: A layered grammar

The layered grammar defines the components of a plot as:

1. a default dataset and set of mappings from variables to aesthetics 

2. one or more layers, each layer having one geometric object, one statistical transformation, one position adjustment, and optionally, one dataset and set of aesthetic mappings  

3. one scale for each aesthetic mapping used  

4. a coordinate system 

5. the facet specification 
.pull-right[
![](images/l.png)

]

???

---

# What is a Layer?


- it determines the physical representation of the data
  
- a plot may have multiple layers
  - usually all the layers on a plot have something in common, i.e. different views of the same data
    
- a layer is composed of four parts:
    1. data and aesthetic mapping
    2.  a statistical transformation (stat)
    3. a geometric object (geom)
    4. a position adjustment


???


---

# ggplot2: A layered grammar

&lt;img src="motivation_files/figure-html/plots-4-1.png"  /&gt;


&lt;style&gt;
.column-left{
  float: left;
  width: 32%;
  text-align: left;
}
.column-center{
  display: inline-block;
  width: 34%;
  text-align: left;
}
.column-right{
  float: right;
  width: 32%;
  text-align: left;
}
&lt;/style&gt;

&lt;div class="column-left"&gt;

data: diamonds  &lt;/br&gt;
layer:  &lt;/br&gt;
  mapping: x = cut, y = count, fill = cut  &lt;/br&gt;  
  geom: bar    &lt;/br&gt;
coordinates: Cartesian

&lt;/div&gt;
&lt;div class="column-center"&gt;

data: diamonds  &lt;/br&gt;
layer:  &lt;/br&gt;
  - mapping: x = 1, y = count, fill = cut  &lt;/br&gt;
  - geom: fill-bar  &lt;/br&gt;
coordinates: Cartesian  &lt;/br&gt;

&lt;/div&gt;
&lt;div class="column-right"&gt;

data: diamonds  &lt;/br&gt;
layer:  &lt;/br&gt;
  - mapping: x = 1, y = count, fill = cut  &lt;/br&gt;
  - geom: fill-bar  &lt;/br&gt;
coordinates: Polar  &lt;/br&gt;
&lt;/div&gt;


---

class: center, middle 

# Make your first figure

---






# We begin with the data


```r
ggplot(data = diamonds)
```

![](motivation_files/figure-html/unnamed-chunk-7-1.png)&lt;!-- --&gt;

---

# Then we specify the aesthetic mappings


```r
ggplot(data = diamonds, aes(x = carat, y = price))
```

![](motivation_files/figure-html/unnamed-chunk-9-1.png)&lt;!-- --&gt;
???
or what relationships we want to see
---

# Then we choose a geom


```r
ggplot(data = diamonds, aes(x = carat, y = price)) +
    geom_point()
```

![](motivation_files/figure-html/unnamed-chunk-11-1.png)&lt;!-- --&gt;

---

# And add an aesthetic


```r
ggplot(data = diamonds, aes(x = carat, y = price)) +
    geom_point(aes(colour = cut))
```

![](motivation_files/figure-html/unnamed-chunk-13-1.png)&lt;!-- --&gt;

---
# And add another layer...


```r
ggplot(data = diamonds, aes(x = carat, y = price)) +
    geom_point(aes(colour = cut)) +
   geom_smooth()
```

![](motivation_files/figure-html/unnamed-chunk-15-1.png)&lt;!-- --&gt;

---

# Mapping aesthetics vs setting aesthetics


```r
ggplot(data = diamonds, aes(x = carat, y = price) +
    geom_point(aes(colour = cut), size = 2, alpha = .5) +
    geom_smooth((aes(fill = cut)) 
```

![](motivation_files/figure-html/unnamed-chunk-17-1.png)&lt;!-- --&gt;

---

# Coordinate transformations can be specified


```r
ggplot(data = diamonds, aes(x = carat, y = price)) +
    geom_point(aes(colour = cut), size = 2, alpha = .5) +
    geom_smooth(aes(fill = cut)) +
    scale_y_log10()
```

![](motivation_files/figure-html/unnamed-chunk-19-1.png)&lt;!-- --&gt;


---

# As can facet variables


```r
ggplot(data = diamonds, aes(x = carat, y = price)) +
    geom_point(aes(colour = cut), size = 2, alpha = .5) +
    geom_smooth() +
    scale_y_log10() +
    facet_wrap(~cut)
```

![](motivation_files/figure-html/unnamed-chunk-21-1.png)&lt;!-- --&gt;


---

# Course Outline

BASICS
1. Why is data visualization important?
2. Data Types, Formats, and Structures
3. Formatting your data: A tidy data discussion

BUILDING PLOTS
1. Geoms, Stats, Coordinates, and Faceting

PERCEPTION
1. Basics of cognitive visual perception
2. What makes a good graphic?
3. Aesthetics and scales in ‘ggplot2‘

POLISHING PLOTS
1. Setting themes
2. Modifying elements of a plot  
3. Making plots interactive!
4. Saving your work
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>
<style>
.logo {
  background-image: url(images/logo.png);
  background-size: contain;
  background-repeat: no-repeat;
  position: absolute;
  bottom: 1em;
  left: 1em;
  width: 60px;
  height: 60px;
  z-index: 0;
}
</style>

<script>
document
  .querySelectorAll(
    '.remark-slide-content' +
    ':not(.title-slide)' +
    // add additional classes to exclude here, e.g.
    // ':not(.inverse)' +
    ':not(.hide-logo)'
  )
  .forEach(el => {
    el.innerHTML += '<div class="logo"></div>';
  });
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
